<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>How to Play — Skill Game (Lounge Edition)</title>
<style>
  /* ===== Reset & base ===== */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(circle at 10% 10%, rgba(18,18,24,0.7) 0%, rgba(4,4,6,1) 40%), linear-gradient(180deg,#020203 0%, #000 100%);
    color:#e9f7f4;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
  }

  /* ===== Particles canvas fills background ===== */
  #particles {
    position:fixed;
    inset:0;
    z-index:0;
    pointer-events:none;
  }

  /* ===== Container ===== */
  .wrap {
    position:relative;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    z-index:5;
  }

  /* backdrop glow */
  .backdrop {
    position: absolute;
    inset: 0;
    z-index: 1;
    background:
      radial-gradient(800px 400px at 10% 10%, rgba(10,20,30,0.25), transparent 20%),
      radial-gradient(700px 350px at 90% 90%, rgba(20,0,6,0.25), transparent 18%),
      linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.75));
    filter: blur(6px) saturate(115%);
    pointer-events:none;
  }

  /* ===== Card ===== */
  .card {
    position:relative;
    width:min(92vw,720px);
    max-width:720px;
    background: linear-gradient(180deg, rgba(8,8,12,0.96), rgba(4,4,6,0.98));
    border-radius:14px;
    padding:30px;
    box-shadow:
      0 30px 80px rgba(0,0,0,0.7),
      inset 0 1px 0 rgba(255,255,255,0.02);
    border:1px solid rgba(255,200,60,0.035);
    z-index: 10;
    overflow: visible;
  }

  /* top header row */
  .card-header {
    display:flex;
    align-items:center;
    gap:16px;
  }

  .badge {
    min-width:56px;
    height:56px;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800;
    color:#052;
    background: linear-gradient(180deg,#9fffe8,#00b39f);
    box-shadow:0 8px 24px rgba(0,179,159,0.12);
    font-size:1.05rem;
  }

  .title-wrap{
    flex:1;
  }

  .title {
    font-size:1.35rem;
    color:#dffef9;
    font-weight:800;
    letter-spacing:0.2px;
  }

  .subtitle {
    margin-top:6px;
    font-size:0.95rem;
    color:#bfe9e6;
    opacity:0.95;
  }

  /* progress bar */
  .progress-bar {
    margin-top:18px;
    height:8px;
    background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:10px;
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.02);
  }
  .progress-fill {
    height:100%;
    width:0%;
    background: linear-gradient(90deg, #00ffd4, #00b3ff);
    box-shadow: 0 6px 30px rgba(0,191,255,0.12);
    transition: width 520ms cubic-bezier(.2,.9,.2,1);
  }

  /* body content */
  .card-body{
    margin-top:18px;
    font-size:1rem;
    color:#dff5f4;
    line-height:1.6;
    min-height:120px;
  }

  .hint {
    margin-top:12px;
    padding:10px 12px;
    border-radius:10px;
    background: linear-gradient(180deg, rgba(0,179,159,0.04), rgba(0,0,0,0.05));
    border:1px solid rgba(0,179,159,0.05);
    color:#cdeeea;
    font-size:0.95rem;
  }

  /* controls row */
  .controls {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:18px;
    gap:12px;
  }

  .dots {
    display:flex;
    gap:8px;
    align-items:center;
  }

  .dot{
    width:12px;height:12px;border-radius:50%;
    background:rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.02);
    transition:all 220ms ease;
  }
  .dot.active{
    background:linear-gradient(90deg,#00ffd4,#00b3ff);
    box-shadow:0 0 12px rgba(0,191,255,0.14);
    transform:scale(1.25);
    border:none;
  }

  .ctrls {
  display: flex;
  flex-wrap: wrap;      /* allow buttons to wrap on small screens */
  gap: 10px;
  justify-content: flex-end; /* keep them aligned nicely */
}

 .btn {
    padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);
    background:transparent;color:#e9ffff;font-weight:700;cursor:pointer;
    transition:all 160ms ease;
    min-width:92px;text-align:center;
  }

  .btn:active{transform:translateY(1px)}
  .btn.primary{
    background:linear-gradient(90deg,#00ffd4,#00b3ff);
    color:#001617;border:none;
    box-shadow:0 10px 28px rgba(0,179,255,0.12);
  }
  .btn.ghost{
    background:transparent;
    color:#dffaf9;border:1px solid rgba(255,255,255,0.04);
  }
  .btn.warn {
    background: linear-gradient(90deg,#ffd66b,#ff5e7a);
    color:#071018;border:none;
    box-shadow:0 8px 22px rgba(255,120,100,0.08);
  }

  .foot {
    margin-top:12px;text-align:center;color:#9fbfc0;font-size:0.92rem;
  }

  /* fancy small animation on next click */
  .pulse {
    animation: pulse 420ms ease;
  }
  @keyframes pulse {
    0%{transform:scale(1)}
    50%{transform:scale(0.985)}
    100%{transform:scale(1)}
  }

  /* responsive */
  @media (max-width:640px){
    .card{width:94vw;padding:18px;border-radius:12px}
    .badge{min-width:44px;height:44px;font-size:0.98rem}
    .title{font-size:1.1rem}
    .card-body{font-size:0.95rem;min-height:100px}
    .btn{min-width:78px;padding:8px 10px}
  }
</style>
</head>
<body>
  <canvas id="particles"></canvas>

  <div class="wrap" aria-live="polite">
    <div class="backdrop" aria-hidden="true"></div>

    <section class="card" role="dialog" aria-modal="true" aria-labelledby="cardTitle">
      <div class="card-header">
        <div class="badge" id="stepBadge">1</div>
        <div class="title-wrap">
          <div class="title" id="cardTitle">Register</div>
          <div class="subtitle" id="cardSub">Quick and secure. Create your account to begin.</div>
        </div>
      </div>

      <div class="progress-bar" aria-hidden="true">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <div class="card-body" id="cardBody" tabindex="0">
        <p><strong>Step 1 — Register:</strong> Click <em>Register</em> on the landing page, enter a valid email, a unique username and a strong password. Complete registration to unlock gameplay.</p>
        <div class="hint">Tip: choose a memorable username — it will show on leaderboards.</div>
      </div>

      <div class="controls" aria-hidden="false">
        <div class="dots" id="dots" aria-hidden="true"></div>

        <div class="ctrls" role="group" aria-label="Tutorial controls">
          <button class="btn ghost" id="backBtn" aria-label="Previous step">Back</button>
          <button class="btn ghost" id="skipBtn" aria-label="Skip tutorial">Skip</button>
          <button class="btn primary" id="nextBtn" aria-label="Next step">Next</button>
        </div>
      </div>

      <div class="foot">Use ← and → keys to navigate • Sound & effects will start on first interaction</div>
    </section>
  </div>

<script>
/* =======================
   Tutorial content (ordered)
   ======================= */
const STEPS = [
  {
    title: "Register",
    sub: "Quick and secure. Create your account to begin.",
    html: `<p><strong>Step 1 — Register:</strong> Click <em>Register</em> on the landing page, enter a valid email, a unique username and a strong password. Complete registration to unlock gameplay.</p>
           <div class="hint">Tip: choose a memorable username — it will show on leaderboards.</div>`
  },
  {
    title: "Login",
    sub: "Sign in and view your wallet balance.",
    html: `<p><strong>Step 2 — Login:</strong> Use your email and password to sign in. After login the dashboard shows your Available balance and recent activity. Balances auto-refresh periodically.</p>
           <div class="hint">Tip: Keep your password safe and consider a strong passphrase.</div>`
  },
  {
    title: "Deposit",
    sub: "Fund your wallet securely with Paystack.",
    html: `<p><strong>Step 3 — Deposit:</strong> Click <em>Deposit</em>, enter an amount and complete the secure Paystack flow. Deposits are usually instant and reflected in your balance.</p>
           <div class="hint">Tip: check your Available balance after payment; if delayed, contact support.</div>`
  },
  {
    title: "Play",
    sub: "Stake, start, and dodge hazards to win.",
    html: `<p><strong>Step 4 — Play:</strong> Enter your stake, click <em>Start Game</em>. Control the white ball to avoid red hazards and collect green tokens. Survive until time runs out to win.</p>
           <div class="hint">Tip: Mobile drag and desktop mouse follow are supported — try gentle, small movements for control.</div>`
  },
  {
    title: "Withdraw",
    sub: "Withdraw your winnings quickly.",
    html: `<p><strong>Step 5 — Withdraw:</strong> When you win, open <em>Withdraw</em>, provide payout details and submit. Withdrawals are processed to your selected payout method.</p>
           <div class="hint">Tip: ensure payout info is accurate to avoid delays.</div>`
  },
  {
    title: "Logout & Safety",
    sub: "Secure your account after play.",
    html: `<p><strong>Step 6 — Logout:</strong> Click <em>Logout</em> when finished, especially on shared devices, to keep your account secure.</p>
           <div class="hint">Tip: never share your password or session tokens.</div>`
  }
];

/* DOM refs */
const badge = document.getElementById('stepBadge');
const titleEl = document.getElementById('cardTitle');
const subEl = document.getElementById('cardSub');
const bodyEl = document.getElementById('cardBody');
const dotsEl = document.getElementById('dots');
const nextBtn = document.getElementById('nextBtn');
const backBtn = document.getElementById('backBtn');
const skipBtn = document.getElementById('skipBtn');
const progressFill = document.getElementById('progressFill');

let idx = 0;
let audioStarted = false;

/* ==== Build dots ==== */
function buildDots(){
  dotsEl.innerHTML = '';
  for(let i=0;i<STEPS.length;i++){
    const d=document.createElement('div');
    d.className='dot' + (i===0?' active':'');
    d.dataset.i=i;
    d.tabIndex = 0;
    d.addEventListener('click', ()=> goTo(i));
    d.addEventListener('keydown', e=> { if(e.key==='Enter') goTo(i); });
    dotsEl.appendChild(d);
  }
}
buildDots();

/* ==== Render step ==== */
function render(i, opts={animate:true}){
  if(i<0)i=0;
  if(i>=STEPS.length)i=STEPS.length-1;
  idx=i;
  const s = STEPS[i];

  badge.textContent = (i+1);
  titleEl.textContent = s.title;
  subEl.textContent = s.sub;
  bodyEl.innerHTML = s.html;

  // dots
  Array.from(dotsEl.children).forEach((d,ii)=> d.classList.toggle('active', ii===i));

  // progress
  const pct = Math.round(((i+1)/STEPS.length)*100);
  progressFill.style.width = pct + '%';

  // buttons
  backBtn.disabled = (i===0);
  if(i === STEPS.length-1){
    nextBtn.textContent = 'Go to Game';
    nextBtn.onclick = ()=> { window.location.href='index.html'; };
    skipBtn.style.display='none';
  } else {
    nextBtn.textContent='Next';
    nextBtn.onclick = ()=> { playClick(); goTo(idx+1); };
    skipBtn.style.display='inline-block';
  }

  // visual micro effect
  nextBtn.classList.add('pulse');
  setTimeout(()=> nextBtn.classList.remove('pulse'), 420);
}

/* ==== navigation ==== */
function goTo(i){
  render(i);
}

/* ==== keyboard support ==== */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight') {
    if(idx < STEPS.length-1) { playClick(); goTo(idx+1); }
    else window.location.href='index.html';
  }
  if(e.key === 'ArrowLeft') {
    if(idx > 0) goTo(idx-1);
  }
  if(e.key === 'Escape') {
    goTo(STEPS.length-1);
  }
});

/* buttons */
backBtn.addEventListener('click', ()=> { playBack(); if(idx>0) goTo(idx-1); });
skipBtn.addEventListener('click', ()=> { playClick(); goTo(STEPS.length-1); });

/* ==== Particles (soft floating chips/sparkles) ==== */
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let W = canvas.width = innerWidth;
let H = canvas.height = innerHeight;
const particles = [];
const P_COUNT = Math.round((W*H)/90000); // scale with screen
for(let i=0;i<P_COUNT;i++){
  particles.push({
    x: Math.random()*W,
    y: Math.random()*H,
    r: 2 + Math.random()*6,
    dx: (Math.random()-0.5)*0.2,
    dy: -0.15 - Math.random()*0.3,
    alpha: 0.05 + Math.random()*0.25,
    rot: Math.random()*Math.PI*2,
    rotSpeed: (Math.random()-0.5)*0.01
  });
}
function drawParticles(){
  ctx.clearRect(0,0,W,H);
  for(const p of particles){
    p.x += p.dx;
    p.y += p.dy;
    p.rot += p.rotSpeed;
    if(p.y < -20) { p.y = H + 20; p.x = Math.random()*W; }
    if(p.x < -40) p.x = W + 40;
    if(p.x > W + 40) p.x = -40;
    ctx.save();
    ctx.globalAlpha = p.alpha;
    ctx.translate(p.x,p.y);
    ctx.rotate(p.rot);
    // draw a soft chip/sparkle
    const grd = ctx.createLinearGradient(-p.r,-p.r,p.r,p.r);
    grd.addColorStop(0, 'rgba(255,230,140,0.08)');
    grd.addColorStop(1, 'rgba(0,220,200,0.06)');
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.ellipse(0,0,p.r*1.2,p.r*0.7,0,0,Math.PI*2);
    ctx.fill();
    ctx.restore();
  }
}
function loopParticles(){
  drawParticles();
  requestAnimationFrame(loopParticles);
}
loopParticles();
window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; });

/* ==== Audio: Luxury lounge ambient + click chime (synthesized) ==== */
let audioCtx, masterGain, ambientGain;
let ambientOsc1, ambientOsc2, ambientFilter;
let chimeOsc1, chimeOsc2;

function initAudio(){
  if(audioStarted) return;
  audioStarted = true;
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  masterGain = audioCtx.createGain();
  masterGain.gain.value = 0.9;
  masterGain.connect(audioCtx.destination);

  // Ambient pad (two oscillators + lowpass + smooth fade)
  ambientGain = audioCtx.createGain();
  ambientGain.gain.value = 0.0;
  ambientGain.connect(masterGain);

  ambientOsc1 = audioCtx.createOscillator();
  ambientOsc1.type = 'sine';
  ambientOsc1.frequency.value = 60; // low
  ambientOsc2 = audioCtx.createOscillator();
  ambientOsc2.type = 'triangle';
  ambientOsc2.frequency.value = 90;

  ambientFilter = audioCtx.createBiquadFilter();
  ambientFilter.type = 'lowpass';
  ambientFilter.frequency.value = 800;
  ambientFilter.Q.value = 0.7;

  ambientOsc1.connect(ambientFilter);
  ambientOsc2.connect(ambientFilter);
  ambientFilter.connect(ambientGain);

  ambientOsc1.start();
  ambientOsc2.start();

  // gentle fade-in
  ambientGain.gain.cancelScheduledValues(audioCtx.currentTime);
  ambientGain.gain.setValueAtTime(0.0, audioCtx.currentTime);
  ambientGain.gain.linearRampToValueAtTime(0.12, audioCtx.currentTime + 1.5);

  // slight movement: LFO for filter
  const lfo = audioCtx.createOscillator();
  const lfoGain = audioCtx.createGain();
  lfo.type = 'sine'; lfo.frequency.value = 0.08;
  lfoGain.gain.value = 300; // filter frequency swing
  lfo.connect(lfoGain);
  lfoGain.connect(ambientFilter.frequency);
  lfo.start();
}

/* chime: quick pleasant coin */
function playChime(){
  if(!audioStarted) return; // won't play until user interaction started audio
  const t = audioCtx.currentTime;
  // high bell
  const o1 = audioCtx.createOscillator();
  o1.type = 'sine'; o1.frequency.setValueAtTime(880, t);
  const g1 = audioCtx.createGain(); g1.gain.setValueAtTime(0.0,t);
  o1.connect(g1); g1.connect(masterGain);
  o1.start(t); o1.stop(t+0.5);
  g1.gain.linearRampToValueAtTime(0.08,t+0.01);
  g1.gain.exponentialRampToValueAtTime(0.0001,t+0.5);

  // lower metallic body
  const o2 = audioCtx.createOscillator();
  o2.type = 'triangle'; o2.frequency.setValueAtTime(440, t);
  const g2 = audioCtx.createGain(); g2.gain.setValueAtTime(0.0,t);
  const f2 = audioCtx.createBiquadFilter(); f2.type='bandpass'; f2.frequency.value=1000;
  o2.connect(f2); f2.connect(g2); g2.connect(masterGain);
  o2.start(t); o2.stop(t+0.6);
  g2.gain.linearRampToValueAtTime(0.06,t+0.01);
  g2.gain.exponentialRampToValueAtTime(0.0001,t+0.6);
}

/* safe-start audio on user gesture */
function safeStartAudio(){
  if(audioStarted) return;
  try{
    initAudio();
  }catch(e){
    console.warn('Audio init failed',e);
  }
}

/* play click/advance chime and small vibration if supported */
function playClick(){
  safeStartAudio();
  playChime();
  if(navigator.vibrate) navigator.vibrate(20);
}

/* play back (soft sound on back) */
function playBack(){
  safeStartAudio();
  // gentler lower tick
  if(!audioStarted) return;
  const t = audioCtx.currentTime;
  const o = audioCtx.createOscillator(); o.type='sine'; o.frequency.setValueAtTime(300,t);
  const g = audioCtx.createGain(); g.gain.setValueAtTime(0.0,t);
  o.connect(g); g.connect(masterGain);
  o.start(t); o.stop(t+0.28);
  g.gain.linearRampToValueAtTime(0.06, t+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001, t+0.28);
}

/* ==== Initialize UI ==== */
render(0); // initial render

/* initial event: first interaction to unlock audio */
document.addEventListener('pointerdown', function once(){
  safeStartAudio();
  document.removeEventListener('pointerdown', once);
});

/* ensure focus on body area for key navigation */
bodyEl = document.getElementById('cardBody');
bodyEl && bodyEl.focus();

/* expose render function for navigation & button logic (closure) */
function render(i){
  // clamp
  if(i<0) i=0;
  if(i>STEPS.length-1) i=STEPS.length-1;
  idx = i;
  const s = STEPS[i];
  badge.textContent = (i+1);
  titleEl.textContent = s.title;
  subEl.textContent = s.sub;
  bodyEl.innerHTML = s.html;

  // update dots
  Array.from(dotsEl.children).forEach((d,ii)=> d.classList.toggle('active', ii===i));

  // progress animate
  const pct = Math.round(((i+1)/STEPS.length)*100);
  progressFill.style.width = pct + '%';

  // buttons
  backBtn.disabled = (i===0);
  if(i === STEPS.length-1){
    nextBtn.textContent = 'Go to Game';
    nextBtn.onclick = ()=> { window.location.href = 'index.html'; };
    skipBtn.style.display = 'none';
  } else {
    nextBtn.textContent = 'Next';
    nextBtn.onclick = ()=> { playClick(); render(idx+1); };
    skipBtn.style.display = 'inline-block';
  }

  // micro pulse
  nextBtn.classList.add('pulse');
  setTimeout(()=> nextBtn.classList.remove('pulse'), 420);
}

/* hookup other buttons */
backBtn.addEventListener('click', ()=> { playBack(); if(idx>0) render(idx-1); });
skipBtn.addEventListener('click', ()=> { playClick(); render(STEPS.length-1); });

/* keyboard nav */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight'){ if(idx<STEPS.length-1){ playClick(); render(idx+1);} else { window.location.href='index.html'; } }
  if(e.key === 'ArrowLeft'){ if(idx>0){ playBack(); render(idx-1);} }
  if(e.key === 'Escape'){ render(STEPS.length-1); }
});

/* ensure dots exist (we referenced earlier before build) */
(function ensureDots(){
  if(dotsEl.children.length === 0) buildDots();
  function buildDots(){
    dotsEl.innerHTML = '';
    for(let i=0;i<STEPS.length;i++){
      const d = document.createElement('div');
      d.className = 'dot' + (i===0 ? ' active' : '');
      d.dataset.i = i;
      d.tabIndex = 0;
      d.addEventListener('click', ()=> render(i));
      d.addEventListener('keydown', (ev)=> { if(ev.key==='Enter') render(i); });
      dotsEl.appendChild(d);
    }
  }
})();

/* small accessibility: focus first interactive */
setTimeout(()=> { const btn = document.getElementById('nextBtn'); btn && btn.focus(); }, 600);
</script>
</body>
</html>
